<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Document</title>
    <link rel="stylesheet" href="/main.css">
</head>
<body class="grey-bg">

    <%- include('nav.ejs'), {age: 20} %>

    <div class="white-bg">
        <% for(let i=0; i<ê¸€ëª©ë¡.length; i++) { %>
            <div class="list-box">
              <h4>
                <a href="/detail/<%= ê¸€ëª©ë¡[i]._id %>">
                  <%= ê¸€ëª©ë¡[i].title %>
                </a>
                <a href="/edit/<%= ê¸€ëª©ë¡[i]._id %>">âœï¸</a>
                <span class="delete" data-id="<%= ê¸€ëª©ë¡[i]._id %>">ğŸ—‘ï¸</span>
              </h4>
              <p><%= ê¸€ëª©ë¡[i].content %></p>
            </div>
        <% } %>
    </div>

    <div class="btn_wrap">
      <a href="/list/1">1</a>
      <a href="/list/2">2</a>
      <a href="/list/3">3</a>
    </div>

    <script>
      let deleteBtn = document.querySelectorAll(".delete");

      deleteBtn.forEach((item, i) => {
        item.addEventListener('click', function(e) {
          fetch(`/delete?docid=${e.target.dataset.id}`, {
            method: 'DELETE',
          })
          .then((r) => r.text())
          .then((r) => {
            e.target.parentElement.parentElement.style.display = 'none'
          })
        })
      });
    </script>
  </body>
</html>